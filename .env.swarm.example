# ArduPilot Multi-Vehicle Swarm Configuration
# =============================================
# Copy this file to .env.swarm and modify as needed:
#   cp .env.swarm.example .env.swarm
#
# Usage:
#   docker-compose -f docker-compose.swarm.yml --env-file .env.swarm up

# ==========================================
# Global Settings
# ==========================================

# Simulation speedup (1 = real-time, 10 = 10x faster)
SPEEDUP=1

# IP address of external simulator (Gazebo)
# Leave as 127.0.0.1 for local simulation
SIM_ADDRESS=127.0.0.1

# Wipe EEPROM on startup (1 = wipe, 0 = keep)
WIPE=0

# Synthetic clock for faster-than-realtime
SYNTHETIC_CLOCK=0

# ==========================================
# ROS2/DDS Global Settings
# ==========================================

# Enable DDS for all vehicles
ENABLE_DDS=1

# SINGLE DDS PORT FOR ALL VEHICLES
# All vehicles connect to the SAME Micro ROS Agent on port 2019
# They are differentiated by their SYSID_THISMAV parameter
# ROS2 will namespace topics automatically (e.g., /vehicle_1/ap/pose)
DDS_UDP_PORT=2019

# Micro ROS Agent IP address
DDS_IP0=127
DDS_IP1=0
DDS_IP2=0
DDS_IP3=1

# ROS_DOMAIN_ID (must match ROS2 agent)
DDS_DOMAIN_ID=0

# DDS connection settings
DDS_TIMEOUT_MS=2000
DDS_MAX_RETRY=0

# ==========================================
# Copter 1 Configuration
# ==========================================
# Instance: 0
# MAVLink Port: 5760
# SITL Port: 5501
# Shared DDS Port: 2019

COPTER1_MODEL=quad
COPTER1_SYSID=1

# Home location: lat,lon,alt,heading (degrees,degrees,meters,degrees)
# Format: latitude,longitude,altitude_MSL,heading
# Leave empty for default ArduPilot location
# Default location (if empty): CMAC, Canberra, Australia
#
# Example spawn locations with 10-meter spacing:
# COPTER1_HOME=35.363261,149.165230,584,0
COPTER1_HOME=

# ==========================================
# Copter 2 Configuration
# ==========================================
# Instance: 1
# MAVLink Port: 5770
# SITL Port: 5511
# Shared DDS Port: 2019

COPTER2_MODEL=hexa
COPTER2_SYSID=2

# Spawn 10 meters EAST of Copter 1
# Longitude offset: ~0.00001 degrees ≈ 10 meters at equator
# Example: If Copter 1 is at 149.165230, Copter 2 is at 149.165240
# COPTER2_HOME=35.363261,149.165240,584,0
COPTER2_HOME=

# ==========================================
# Plane 1 Configuration
# ==========================================
# Instance: 2
# MAVLink Port: 5780
# SITL Port: 5521
# Shared DDS Port: 2019

PLANE1_MODEL=plane
PLANE1_SYSID=3

# Spawn 20 meters EAST of Copter 1, at higher altitude (100m higher)
# Planes need more altitude for safety
# PLANE1_HOME=35.363261,149.165250,684,0
PLANE1_HOME=

# ==========================================
# VTOL 1 Configuration
# ==========================================
# Instance: 3
# MAVLink Port: 5790
# SITL Port: 5531
# Shared DDS Port: 2019

VTOL1_MODEL=quadplane
VTOL1_SYSID=4

# Spawn 30 meters EAST of Copter 1
# VTOL1_HOME=35.363261,149.165260,584,0
VTOL1_HOME=

# ==========================================
# Port Reference
# ==========================================
# Each instance offsets ports by 10 * instance_number
#
# Instance 0 (Copter 1):
#   - MAVLink: 5760 TCP
#   - SITL: 5501 UDP
#   - DDS: 2019 UDP
#   - GCS: 14550 UDP
#
# Instance 1 (Copter 2):
#   - MAVLink: 5770 TCP
#   - SITL: 5511 UDP
#   - DDS: 2029 UDP
#   - GCS: 14560 UDP
#
# Instance 2 (Plane 1):
#   - MAVLink: 5780 TCP
#   - SITL: 5521 UDP
#   - DDS: 2039 UDP
#   - GCS: 14570 UDP
#
# Instance 3 (VTOL 1):
#   - MAVLink: 5790 TCP
#   - SITL: 5531 UDP
#   - DDS: 2049 UDP
#   - GCS: 14580 UDP

# ==========================================
# Vehicle Type Options
# ==========================================
# ArduCopter models: quad, hexa, octa, tri, y6, X, +, V, H
# ArduPlane models: plane, quadplane, plane-elevon, plane-vtail
# ArduRover models: rover, boat
# ArduSub models: vectored

# ==========================================
# Spawn Location Patterns
# ==========================================
# Coordinate conversion reference:
# - ~0.00001 degrees longitude ≈ 10 meters (at mid-latitudes)
# - ~0.00001 degrees latitude ≈ 11 meters
#
# Base Location (Canberra, Australia):
#   Lat: 35.363261, Lon: 149.165230, Alt: 584m

# PATTERN 1: Line Formation (East-West, 10m spacing)
# COPTER1_HOME=35.363261,149.165230,584,0  # Origin
# COPTER2_HOME=35.363261,149.165240,584,0  # 10m east
# PLANE1_HOME=35.363261,149.165250,684,0   # 20m east, 100m higher
# VTOL1_HOME=35.363261,149.165260,584,0    # 30m east

# PATTERN 2: Square Formation (20m sides)
# COPTER1_HOME=35.363261,149.165230,584,0  # Southwest corner
# COPTER2_HOME=35.363261,149.165250,584,0  # Southeast corner (20m east)
# PLANE1_HOME=35.363281,149.165230,684,0   # Northwest corner (20m north, 100m higher)
# VTOL1_HOME=35.363281,149.165250,584,0    # Northeast corner (20m north, 20m east)

# PATTERN 3: Diamond Formation (15m from center)
# COPTER1_HOME=35.363261,149.165230,584,0  # Center/Leader
# COPTER2_HOME=35.363261,149.165215,584,90 # 15m west, facing east
# PLANE1_HOME=35.363276,149.165230,684,180 # 15m north, 100m higher, facing south
# VTOL1_HOME=35.363261,149.165245,584,270  # 15m east, facing west

# PATTERN 4: Staggered Altitude (same position, different heights)
# COPTER1_HOME=35.363261,149.165230,584,0   # Ground level
# COPTER2_HOME=35.363261,149.165230,604,0   # +20m altitude
# PLANE1_HOME=35.363261,149.165230,634,0    # +50m altitude
# VTOL1_HOME=35.363261,149.165230,664,0     # +80m altitude

# ==========================================
# Examples for Different Swarm Types
# ==========================================

# Example 1: All Quadcopters (Search & Rescue)
# COPTER1_MODEL=quad
# COPTER2_MODEL=quad
# Disable plane-1 and vtol-1 services in docker-compose.swarm.yml

# Example 2: Mixed Fleet (Delivery Service)
# COPTER1_MODEL=quad (delivery)
# COPTER2_MODEL=hexa (heavy lift)
# PLANE1_MODEL=plane (long range)
# VTOL1_MODEL=quadplane (versatile)

# Example 3: Formation Flying
# Use PATTERN 1 or PATTERN 2 above with same vehicle type
# COPTER1_MODEL=quad
# COPTER2_MODEL=quad
# PLANE1_MODEL=quad
# VTOL1_MODEL=quad
